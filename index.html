<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta name="description" content="Implementation of directed graph for JavaScript">
    <meta name="author" content="Juho Vepsäläinen">

    <title>bebraw/graph.js @ GitHub</title>

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="src/graph.js" type="text/javascript"></script>
    <style type="text/css">
    .node {
        position: relative;
        -moz-border-radius: 100px;
        -webkit-border-radius: 100px;
        border-radius: 100px;
        border: 3px solid black;
        width: 100px;
        height: 100px;
        text-align: center;
        background-color: white;
    }

    .node .content {
        width: 100px;
        height: 100px;
        position: relative;
    }

    .line {
        position: absolute;
        border: 2px solid black;
        width: 400px;
        z-index: -1;
        -webkit-transform-origin: 0 0;
    }
    </style>
    <script type="text/javascript">
        $(function() {
            var $scene = $('#scene');
            var a = graph();
            var n1 = node($scene, 50, 50, 'foo');
            var n2 = node($scene, 100, 50, 'bar');
            var n3 = node($scene, 200, 100, 'baz');

            a.add(n1, n2, n3);
            a.link(n1, n2);
            a.link(n2, n3);

            // TODO: figure out how to render links

            function node($parent, x, y, content) {
                return {
                    $n: $node($parent, {x: x, y: y}, content),
                    x: x,
                    y: y,
                    content: content
                }
            }

            function $node($parent, p, c) {
                var $content = $('<p>').addClass('content').html(c);
                var $ret = $('<div>').addClass('node').append($content).appendTo($parent);

                xy($ret, p);
  
                return $ret;
            };

            function xy($e, p) {
                if(p === undefined) {
                    var pos = $e.position();
    
                    return {
                        x: pos.left + parseInt($e.css('width'), 10) / 2,
                        y: pos.top + parseInt($e.css('height'), 10) / 2
                    };
                }
                else {
                    $e.css('left', p.x - parseInt($e.css('width'), 10) / 2 + 'px');
                    $e.css('top', p.y - parseInt($e.css('height'), 10) / 2 + 'px');
                }
            };
        });
    </script>
</head>

<body>
    <a href="https://github.com/bebraw/graph.js"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div class="container">

    <div class="row">
        <h1><a href="https://github.com/bebraw/graph.js">graph.js</a>
            <span class="small">by <a href="https://github.com/bebraw">bebraw</a></span></h1>

        <div class="description">Implementation of directed graph for JavaScript. Compatible with AMD definition.</div>
        
        <h2>License</h2>
        
        <div class="license">MIT</div>

        <h2>Installation</h2>
    
        <div>Copy graph.js to some appropriate place, link to it at your HTML and use graph().</div>

        <h2>Download</h2>

        <div class="download">
            <a href="https://github.com/bebraw/graph.js/zipball/gh-pages">
                <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
            <a href="https://github.com/bebraw/graph.js/tarball/gh-pages">
                <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
        </div>

        <p>You can also clone the project with <a href="http://git-scm.com">Git</a> by running: <pre>$ git clone git://github.com/bebraw/graph.js</pre></p>
        <p>Get the source code on GitHub : <a href="https://github.com/bebraw/graph.js">bebraw/graph.js</a></p>
    </div>

    <div class="row">
    <h2>Demo</h2> 

    <div id="scene"></div>

    </div>
  </div>

</body>
</html>
